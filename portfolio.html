<!DOCTYPE html>
<html>

<head>
    <!-- The head tag links to resources our page needs and defines information about it. Tags in the <head> aren't displayed on the page. -->

    <!-- This is a link to a stylesheet which contains rules about how each element on the page should be defined-->
    <!-- Try swapping example1.css to another, and take a look at example1.css to see if you understand it-->
    <link rel="stylesheet" type="text/css" href="Example3.css">
    <title>My Portfolio</title> <!-- The title displayed in the browser tab, not on the page itself -->

    <!-- This is a link to the vega-lite which we're using to make graphs -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@6"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

    <style>
        #chartGrid {
            display: flex;
        }
    </style>
</head>

<body>
    <!-- The body tag contains the elements that visitors to our page will see. -->
    <nav>
        <a href="index.html">About</a>
        <a href="portfolio.html">Portfolio</a>
        <a href="project.html">Project</a>
        <a href="bonus.html">Extras</a>
    </nav>
    <hr>

    <h1 class="big" style="margin-bottom:0;">Portfolio</h1>

    <h3 class="small">A collection of ten coding challenges.</h3>

    <section>
        <div class="chart-description">
            <h2>CC1: Hosting - loading a basic chart</h2>
            <p>
                This week served as an introduction. We learned to load premade charts. Two examples follow.
            </p>
        </div>
        <figure id="Location1"></figure>
        <figure id="Location2"></figure>
    </section>

    <section>
        <div class="chart-description">
            <h2>CC2: Building - creating visualizations from templates</h2>
            <p>
                This week we created our own charts from pre-existing templates, using Vega-Lite and pulling data from
                the Economics Observatory Data Hub. My charts are below.
            </p>
        </div>
        <figure id="Location3"></figure>
        <figure id="Location4"></figure>
    </section>

    <section>
        <div class="chart-description">
            <h2>CC3: Debate - producing policy-relevant charts</h2>
            <p>
                The relationship between wealth and wellbeing is not linear, at an individual level or a societal one.
                Take a look at Kenya, where improvements in income supported steady increase in longevity until the
                early 1980s...
            </p>
        </div>
        <figure id="Location5"></figure>
        <p>
            ... at which point the HIV/AIDS crisis sharply interrupted decades of gains.
        </p>
        </div>
        <figure id="Location6"></figure>
    </section>

    <section>
        <div class="chart-description">
            <h2>CC4: Replication - copying and improving existing charts</h2>
            <p>
                I found the following (abysmal) chart in news reporting on Florida gun deaths from 2014.
            </p>
            <figure id="Location7">
                <img src="Florida%20Gun%20Deaths.png" alt="Florida gun deaths chart"
                    style="width:300px; height:auto;" />
        </div>
        <p style="margin-top: 1.5em;">
            I replicated it using Vega-Lite:
        </p>
        </div>
        <figure id="Location8"></figure>
        <p>
            And then endeavored to improve it by correcting the orientation of the y axis, simplifying the x axis,
            removing decorative fill and widening the chart for easier reading:
        </p>
        </div>
        <figure id="Location9"></figure>
    </section>

    <section>
        <div class="chart-description">
            <h2>CC5: APIs and scrapers </h2>
            <p>
                Below, hopefully, is a chart showing how net official development assistance (ODA) received per capita
                globally has increased substantially in recent years.
                It pulls data from the World Bank using an API.
            </p>
            <p>
                The URL is
                https://api.worldbank.org/v2/country/WLD/indicator/DT.ODA.ODAT.PC.ZS?format=json&per_page=200, which
                includes the base API (api.worldbank.org), the indicator code for ODA per capita (DT.ODA.ODAT.PC.ZS),
                followed by a question mark, and the World Bank code for "world" to pull global data instead of data for
                specific countries, as well as commands to return the data in JSON and include sufficient results.
            </p>
        </div>
        <figure id="Location10"></figure>
        <p>
            Below is a chart showing U.S. execution methods by year introduced and botch rate, scraped from the Death
            Penalty Information Center. This was pretty straightforward, as it was the only table on the page and there
            were no blocking issues. Colab <a
                href="https://colab.research.google.com/drive/1p0LvzlD0taAUgdF-u5pJm7LOBFNhFse9?usp=sharing">here</a>.
        </p>
        </div>
        <figure id="Location11"></figure>
    </section>

    <section>
        <div class="chart-description">
            <h2>CC6: Loops </h2>
            <p>
                Below are six charts showing the percentage of female adolescents out of school across different
                countries,
                created using a loop to batch download data from the World Bank API.
                <a href="https://colab.research.google.com/drive/1m8wEyVamxlUD86tnoVfW1-u2plgiRuzR#scrollTo=y2JM5Q6ouya3"
                    target="_blank">
                    View the Colab analysis here.
                </a>
            </p>
        </div>
        <!-- Grid container for 6 charts -->
        <div id="chartGrid"
            style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; max-width: 1200px; margin: 0 auto;">
            <!-- Charts will be inserted here by JavaScript -->
        </div>
    </section>

    <section>
        <div class="chart-description">
            <h2>CC7: Maps! </h2>
            <p>
                Below is a points map depicting independent schools in Wales as of 2022, per the Welsh Government.
            </p>
        </div>
        <figure id="Location14"></figure>
        <p>
            Below is a chloropleth map showing the number of live births in Scotland during the 2023/24 financial year,
            per the Scottish NHS.
        </p>
        </div>
        <figure id="Location15"></figure>
    </section>

    <section>
        <div class="chart-description">
            <h2>CC8: Interactive </h2>
            <p>
                Below is an interactive chloropleth map showing the usage of different types of execution methods in U.S. states since 1608, per the Death Penalty Information Center.
            </p>
        </div>
        <figure id="Location16"></figure>
        <p>
            Below is an alternative look at the same data, with a drop-down menu for individual state selection.
        </p>
        </div>
        <figure id="Location17"></figure>
    </section>

    <!-- This is a script, it's a way to run JavaScript code on the page -->
    <script>
        // This is a comment in JavaScript - it's a different language to HTML and CSS

        let figure_1_spec = "https://raw.githubusercontent.com/37099/37099.github.io/refs/heads/main/Chart%20Line%203.json";
        let figure_2_spec = "GDP Comp.json";
        let figure_3_spec = "Pakistan displacement chart.json"
        let figure_4_spec = "Egypt displacement chart.json"
        let figure_5_spec = "Kenya GDP per capita.json"
        let figure_6_spec = "Kenya life expectancy.json"
        let figure_8_spec = "Florida gun deaths replication.json"
        let figure_9_spec = "Florida gun deaths improvement.json"
        let figure_10_spec = "ODA per capita.json"
        let figure_11_spec = "Execution methods by botch rate US.JSON"
        let figure_14_spec = "Independent Schools in Wales.json"
        let figure_15_spec = "Births in Scotland chloropleth.json"
        let figure_16_spec = "Execution methods by state chloropleth.JSON"
        let figure_17_spec = "Dominant execution method by state and decade.JSON"

        // Loop for CC6 charts
        let countries = ["Lesotho", "Rwanda", "Niger", "Timor-Leste", "Burkina Faso", "Oman"];
        countries.forEach((country, index) => {
            let chartSpec = `${country} girls out of school.JSON`;
            let chartDiv = document.createElement('div');
            chartDiv.id = `loopChart${index}`;
            document.getElementById('chartGrid').appendChild(chartDiv);
            vegaEmbed(`#loopChart${index}`, chartSpec);
        });

        // Embed other charts
        vegaEmbed('#Location1', figure_1_spec)
        vegaEmbed('#Location2', figure_2_spec)
        vegaEmbed('#Location3', figure_3_spec)
        vegaEmbed('#Location4', figure_4_spec)
        vegaEmbed('#Location5', figure_5_spec)
        vegaEmbed('#Location6', figure_6_spec)
        vegaEmbed('#Location8', figure_8_spec)
        vegaEmbed('#Location9', figure_9_spec)
        vegaEmbed('#Location10', figure_10_spec)
        vegaEmbed('#Location11', figure_11_spec)
        vegaEmbed('#Location14', figure_14_spec)
        vegaEmbed('#Location15', figure_15_spec)
        vegaEmbed('#Location16', figure_16_spec)
        vegaEmbed('#Location17', figure_17_spec)

    </script>

</body>

</html>